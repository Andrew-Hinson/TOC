<!DOCTYPE html>
<html>
<head>
    <title>WebTransport Client</title>
</head>
<body>
    <script>
        async function connect() {
            const url = 'https://localhost:4433/echo';
            const transport = new WebTransport(url);

            await transport.ready;
            const stream = await transport.createBidirectionalStream();
            const writer = stream.writable.getWriter();
            const reader = stream.readable.getReader();

            // Send a message to the server
            const message = 'Hello, WebTransport!';
            await writer.write(new TextEncoder().encode(message));

            // Receive a message from the server
            const { value } = await reader.read();
            console.log('Received from server:', new TextDecoder().decode(value));
        }

        connect();
    </script>
</body>
</html>
